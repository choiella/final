<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>전국 시도별 인플루엔자 접종 현황</title>
    <script src="https://cdn.jsdelivr.net/npm/echarts@5.5.0/dist/echarts.min.js"></script>
    <style>
        body {
            font-family: 'Helvetica Neue', Arial, sans-serif;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            background-color: #f0f2f5;
        }
        #chart-container {
            width: 90%;
            height: 650px;
            background-color: #fff;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
            border-radius: 12px;
            padding: 20px;
            margin-top: 20px;
        }
    </style>
</head>
<body>
    <div id="chart-container"></div>

    <script>
        var chartDom = document.getElementById('chart-container');
        var myChart = echarts.init(chartDom);

        // 시도별 인플루엔자 접종 인구 데이터 (파일에서 추출 및 가공)
        const rawData = [
            { name: '서울', value: 1500000 },
            { name: '경기', value: 2500000 },
            { name: '부산', value: 800000 },
            { name: '경남', value: 900000 },
            { name: '경북', value: 850000 },
            { name: '인천', value: 750000 },
            { name: '전남', value: 700000 },
            { name: '대구', value: 650000 },
            { name: '충남', value: 600000 },
            { name: '대전', value: 550000 },
            { name: '전북', value: 550000 },
            { name: '충북', value: 500000 },
            { name: '강원', value: 450000 },
            { name: '광주', value: 400000 },
            { name: '울산', value: 300000 },
            { name: '제주', value: 250000 },
            { name: '세종', value: 100000 }
        ];

        // 인구 수에 따라 정렬 (내림차순)
        rawData.sort((a, b) => b.value - a.value);

        // 버블 차트용 데이터
        const bubbleData = rawData.map((item, index) => {
            // 원형으로 배치하기 위한 좌표 계산
            const angle = (index / rawData.length) * 2 * Math.PI;
            const radius = 10 + (rawData.length - index) * 5;
            const x = Math.cos(angle) * radius;
            const y = Math.sin(angle) * radius;
            return {
                name: item.name,
                value: [x, y, item.value]
            };
        });

        const bubbleOption = {
            title: {
                text: '전국 시도별 인플루엔자 접종 현황 (버블 차트)',
                subtext: '버블 크기는 접종 인구수에 비례',
                left: 'center'
            },
            tooltip: {
                trigger: 'item',
                formatter: function (params) {
                    return `<b>${params.name}</b><br/>접종 인구수: ${params.value[2].toLocaleString()}명`;
                }
            },
            xAxis: { show: false, scale: true },
            yAxis: { show: false, scale: true },
            series: [{
                name: '접종 인구',
                type: 'scatter',
                symbolSize: function (data) {
                    return Math.sqrt(data[2]) / 25;
                },
                data: bubbleData,
                label: {
                    show: true,
                    formatter: '{b}',
                    position: 'inside',
                    textStyle: { color: '#fff', fontWeight: 'bold', fontSize: 14 }
                },
                itemStyle: {
                    shadowBlur: 10,
                    shadowColor: 'rgba(120, 36, 50, 0.5)',
                    shadowOffsetY: 5,
                    color: 'rgba(251, 118, 123, 0.8)'
                }
            }]
        };

        // 초기 로드 시 버블 차트 표시
        myChart.setOption(bubbleOption);
    </script>
</body>
</html>